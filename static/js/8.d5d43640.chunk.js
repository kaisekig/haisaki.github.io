(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[8],{107:function(t,e,n){},114:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));var s=n(57),o=n(71);var c=n(70);function r(t){return function(t){if(Array.isArray(t))return Object(o.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(c.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}for(var u=n(13),j=n(14),l=n(19),b=n(16),h=n(15),d=n(0),O=n.n(d),m=(n(107),n(118)),p=n(110),x=n(112),f=n(77),g=n(78),y=n(17),v=n(40),Q=n(41),w=n(3),C=[],S=0;S<5;S++)C.push(Object(w.jsxs)("div",{children:[Object(w.jsxs)(m.a,{children:[Object(w.jsxs)(m.a.Body,{children:[Object(w.jsx)(m.a.Title,{children:Object(w.jsx)("p",{})}),Object(w.jsx)(m.a.Text,{children:Object(w.jsx)("br",{})})]}),Object(w.jsx)(m.a.Footer,{children:Object(w.jsx)(m.a.Text,{children:Object(w.jsx)("br",{})})})]},S),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]}));var k=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(u.a)(this,n),(s=e.call(this,t)).getAllQuotes=function(){Object(v.a)("api/post","get",{}).then((function(t){if(console.log("response",t),"error"!==t.status)if("login"===t.status&&s.setLogginState(!1),Array.isArray(t.data)){var e=t.data;s.setQuotesState(e)}else s.setQuotesState([])})).catch((function(t){return console.log(t)}))},s.setQuotesState=function(t){s.setState(Object.assign(s.state,{quotes:t}))},s.state={newQuote:{author:"",body:""},isLoggedIn:!0,quotes:[],quotesComment:new Map},s.setNewQuote=s.setNewQuote.bind(Object(l.a)(s)),s.postQuote=s.postQuote.bind(Object(l.a)(s)),s}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.getAllQuotes(),new BroadcastChannel("sync-channel").onmessage=function(e){e.data.finished&&t.getAllQuotes()}}},{key:"postQuote",value:function(t){var e=this;t.preventDefault(),Object(v.a)("api/post/create","post",i({},this.state.newQuote)).then((function(t){console.log(t),"ok"===t.status&&e.setState({quotes:[].concat(r(e.state.quotes),[t.data])})})).catch((function(t){return console.log(t)}))}},{key:"postQuoteComment",value:function(t,e){var n=this;e.preventDefault(),this.state.quotesComment.has(t)&&Object(v.a)("api/post/".concat(t,"/comment"),"post",{text:this.state.quotesComment.get(t)}).then((function(e){n.setState((function(e){return i(i({},e),{},{quotesComment:e.quotesComment.set(t,"")})})),console.log("returned comment from api",e)})).catch((function(t){return console.log(t)}))}},{key:"setLogginState",value:function(t){var e=Object.assign(this.state,{isLoggedIn:t});this.setState(e)}},{key:"setNewQuote",value:function(t){this.setState((function(e){return i(i({},e),{},{newQuote:i(i({},e.newQuote),{},Object(s.a)({},t.target.id,t.target.value))})}))}},{key:"setQuoteComment",value:function(t,e){this.setState((function(n){return i(i({},n),{},{quotesComment:n.quotesComment.set(t,e.target.value)})}))}},{key:"getIniitalComment",value:function(t){return this.state.quotesComment.has(t)?this.state.quotesComment.get(t):""}},{key:"render",value:function(){var t=this;if(!1===this.state.isLoggedIn)return Object(w.jsxs)(p.a,{children:[Object(w.jsx)("br",{}),Object(w.jsxs)(m.a.Text,{children:[Object(w.jsx)("h3",{children:"You are not signed in!"}),Object(w.jsxs)("p",{children:["Please, go back and ",Object(w.jsx)("span",{children:"\ud83d\udc49 "}),Object(w.jsx)(y.b,{to:"/signin",children:"sign in"})]})]})]});var e=C;return this.state.quotes.length&&(e=this.state.quotes.map((function(e,n){return Object(w.jsxs)("div",{children:[Object(w.jsxs)(m.a,{children:[Object(w.jsx)(m.a.Body,{children:Object(w.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(w.jsxs)("p",{children:[" ",e.body," "]}),Object(w.jsxs)("footer",{className:"blockquote-footer",children:["Someone famous in ",Object(w.jsx)("cite",{title:"Source Title",children:e.author})]})]})}),Object(w.jsx)(m.a.Footer,{children:Object(w.jsx)(m.a.Text,{children:Object(w.jsx)(x.a,{onSubmit:function(n){return t.postQuoteComment(e.postId,n)},children:Object(w.jsxs)(x.a.Row,{className:"align-items-center",children:[Object(w.jsxs)(f.a,{Col:!0,xs:7,children:[Object(w.jsx)(x.a.Label,{htmlFor:"inlineFormInput",srOnly:!0,children:"Comment"}),Object(w.jsx)(x.a.Control,{className:"mb-2",id:"inlineFormInput",placeholder:"Comment...",value:t.getIniitalComment(e.postId),onChange:function(n){return t.setQuoteComment(e.postId,n)}})]}),Object(w.jsxs)(f.a,{xs:"auto",children:[Object(w.jsx)(g.a,{type:"submit",variant:"dark",className:"mb-2",size:"sm",children:"Post"}),Object(w.jsx)(y.b,{to:"/"+e.postId,children:Object(w.jsx)("div",{className:"link-params",children:"Open"})})]})]})})})})]}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]},e.postId)}))),Object(w.jsx)(Q.a,{isLoggedIn:this.state.isLoggedIn,children:Object(w.jsxs)("div",{className:"quotes-input",children:[Object(w.jsx)(f.a,{md:{span:6,offset:3},children:Object(w.jsxs)(m.a.Body,{children:[Object(w.jsxs)(m.a.Title,{children:[Object(w.jsx)("p",{children:"Quotes goes here"}),Object(w.jsx)("span",{role:"img","aria-label":"pointing_down",children:" \ud83d\udc47 "})]}),Object(w.jsx)(m.a.Text,{children:Object(w.jsxs)(x.a,{onSubmit:this.postQuote,children:[Object(w.jsxs)(x.a.Group,{controlId:"author",children:[Object(w.jsx)(x.a.Label,{children:" Author: "}),Object(w.jsx)(x.a.Control,{type:"text",value:this.state.newQuote.author,onChange:this.setNewQuote})]}),Object(w.jsxs)(x.a.Group,{controlId:"body",children:[Object(w.jsx)(x.a.Label,{children:"Quote:"}),Object(w.jsx)(x.a.Control,{as:"textarea",rows:3,value:this.state.newQuote.body,onChange:this.setNewQuote})]}),Object(w.jsx)(x.a.Group,{children:Object(w.jsx)(g.a,{type:"submit",variant:"dark",size:"sm",children:"Post"})})]})})]})}),Object(w.jsx)(p.a,{children:e})]})})}}]),n}(O.a.Component)}}]);
//# sourceMappingURL=8.d5d43640.chunk.js.map